<p id="notice"><%= notice %></p>

<h1>Videos</h1>
<p><%= link_to 'New Video', new_video_path %></p>
<table id='datatable-buttons'>
  <thead>
    <tr>
      <th>ç‹€æ…‹</th>
      <th>ç‰‡å</th>
      <th>å½±ç‰‡è­˜åˆ¥ç¢¼</th>
      <th>æ¸…å–®è­˜åˆ¥ç¢¼</th>
      <th>æ¸…å–®åç¨±</th>
      <th>é »é“è­˜åˆ¥ç¢¼</th>
      <th>é »é“åç¨±</th>
      <th>ç‰‡é•·</th>
      <th>ä¸Šå‚³è€…</th>
      <th>ä¸Šå‚³æ—¥æœŸ</th>
      <th>KBit/s</th>
      <th>ä¸‹è¼‰æ™‚é–“</th>
    </tr>
  </thead>

  <tbody>
    <% @videos.each do |video| %>
      <tr>
        <td><%= (link_to video.status.truncate(15),'' , title: video.status) if video.status %></td>
        <td>
          <%= link_to ( ((video.url.include? '/channel/') || (video.url.include? 'list=')) ? 'ğŸ”„' : ''), redownload_videos_path(url: video.url) %>
          <%= link_to (video.title.present? ? video.title : video.url), video.url, target: '_blank' %>
        </td>
        <td><%= video.yid %></td>
        <td><%= video.playlist_id %></td>
        <td><%= video.playlist_title %></td>
        <td><%# video.channel_id %></td>
        <td><%# video.channel %></td>
        <td><%= Time.at(video.duration.to_i).utc.strftime("%H:%M:%S") %></td>
        <td><%= video.uploader %></td>
        <td><%= video.upload_date %></td>
        <td><%= video.abr %></td>
        <td><%= video.created_at.localtime.to_formatted_s(:short) %></td>
      </tr>
    <% end %>
  </tbody>
</table>


<script>
$('#datatable-buttons').dataTable(
  {
    "order": [[ 0, "desc" ]],
    "pageLength": 100
  }
);
</script>

<%# video.title.present? ? file_link(video) : '' %>